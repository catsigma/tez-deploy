webpackJsonp([1],{"2NXm":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("4JBK"),r=a("HOEU"),o=!1;var c=function(e){o||a("8/mF")},i=a("VU/8")(n.a,r.a,!1,c,"data-v-57509004",null);i.options.__file="src/pages/index.vue",t.default=i.exports},"4JBK":function(e,t,a){"use strict";var n=a("mvHQ"),r=a.n(n),o=a("//Fk"),c=a.n(o),i=a("fZjL"),l=a.n(i),s=a("osXY");t.a={data:function(){return{g:s.a,interval:45,countdown:0,content:"",output:"",error:"",val_map:{},batch_tx_map:{},spendable:!1,delegatable:!0,delegate:""}},methods:{timer:function(){var e=this;this.countdown=this.interval;var t=setInterval(function(){e.countdown-=1,0===e.countdown&&clearInterval(t)},1e3);return 1e3*this.interval},replace:function(e,t){return this.objReplace(e,t,this.val_map)},objReplace:function(e,t,a){return e.replace(new RegExp(l()(t).join("|"),"g"),function(e){return a?a[t[e]]:t[e]})},tryBatchTransfer:function(){try{this.batchTransfer()}catch(e){this.error=e.stack}},batchTransfer:function(){var e=this,t=JSON.parse(this.content),a=t.transactions,n=t.contracts,o=tezbridge({method:"public_key_hash"}).then(function(t){e.val_map.ADMIN=t,e.g.admin=t});a.forEach(function(t,a){o=o.then(function(){return new c.a(function(o,c){return setTimeout(function(){tezbridge({method:"operations",operations:t.items.map(function(t){return{method:"transfer",amount:t.amount||0,fee:t.fee||0,gas_limit:t.gas_limit||"400000",destination:e.objReplace(t.destination,n),parameters:JSON.parse(e.objReplace(r()(t.parameters),n))}})}).then(function(n){e.batch_tx_map["tx("+(t.name||a)+")"]=!0,e.output=r()(e.batch_tx_map,null,4),o()}).catch(function(e){return c(e)})},e.timer())})})}),o.then(function(){e.output=r()(e.batch_tx_map,null,4)}).catch(function(t){e.error=t instanceof Error?t.stack:t})},tryDeploy:function(e){try{this.deploy(e)}catch(e){this.error=e.stack}},deploy:function(e){var t=this;if(!e&&!confirm("Have you checked before?"))return!1;this.val_map={};var a=JSON.parse(this.content),n=a.order,o=a.replacement,i=a.contracts,l=tezbridge({method:"public_key_hash"}).then(function(e){t.val_map.ADMIN=e,t.g.admin=e});n.forEach(function(a){l=l.then(function(){return new c.a(function(n,c){return setTimeout(function(){var l=r()(i[a].script),s=r()(i[a].storage),u=JSON.parse(t.replace(l,o)),p=JSON.parse(t.replace(s,o));tezbridge({method:"originate",no_injection:e,balance:0,script:{code:u,storage:p},spendable:t.spendable,delegatable:t.delegatable,delegate:t.delegate?t.delegate:void 0}).then(function(e){t.val_map["CONTRACT."+a]=[].concat.apply([],e.contracts)[0],t.output=r()(t.val_map,null,4),n()}).catch(function(e){return c(e)})},e?0:t.timer())})})}),l.then(function(){t.output=r()(t.val_map,null,4),t.batch_tx_map={},e||(t.g.deployed_contracts=JSON.parse(t.output))}).catch(function(e){t.error=e instanceof Error?e.stack:e})}}}},"8/mF":function(e,t,a){var n=a("rB/p");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("49fd2249",n,!1,{sourceMap:!1})},HOEU:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],attrs:{placeholder:"input deployment or transaction JSON here"},domProps:{value:e.content},on:{input:function(t){t.target.composing||(e.content=t.target.value)}}}),a("div",{staticClass:"option"},[a("label",[a("span",[e._v("spendable:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.spendable,expression:"spendable"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.spendable)?e._i(e.spendable,null)>-1:e.spendable},on:{change:function(t){var a=e.spendable,n=t.target,r=!!n.checked;if(Array.isArray(a)){var o=e._i(a,null);n.checked?o<0&&(e.spendable=a.concat([null])):o>-1&&(e.spendable=a.slice(0,o).concat(a.slice(o+1)))}else e.spendable=r}}})]),a("br"),a("label",[a("span",[e._v("delegatable:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.delegatable,expression:"delegatable"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.delegatable)?e._i(e.delegatable,null)>-1:e.delegatable},on:{change:function(t){var a=e.delegatable,n=t.target,r=!!n.checked;if(Array.isArray(a)){var o=e._i(a,null);n.checked?o<0&&(e.delegatable=a.concat([null])):o>-1&&(e.delegatable=a.slice(0,o).concat(a.slice(o+1)))}else e.delegatable=r}}})]),a("br"),a("label",[a("span",[e._v("delegate:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.delegate,expression:"delegate"}],domProps:{value:e.delegate},on:{input:function(t){t.target.composing||(e.delegate=t.target.value)}}})]),a("br"),a("label",[a("span",[e._v("Transaction interval:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.interval,expression:"interval"}],domProps:{value:e.interval},on:{input:function(t){t.target.composing||(e.interval=t.target.value)}}}),e._v("s")]),a("br"),a("label",[e._v("Transaction countdown: "+e._s(this.countdown)+"s")]),a("br")]),a("button",{on:{click:function(t){e.tryDeploy(!0)}}},[e._v("Check")]),a("button",{on:{click:function(t){e.tryDeploy(!1)}}},[e._v("Deploy")]),a("button",{on:{click:e.tryBatchTransfer}},[e._v("BatchTransfer")]),a("button",{staticClass:"clear-btn",on:{click:function(t){e.output="",e.error=""}}},[e._v("Clear")]),a("pre",{staticClass:"output"},[e._v(e._s(e.output))]),a("pre",{staticClass:"error"},[e._v(e._s(e.error))])])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},osXY:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n={admin:"",deployed_contracts:{}}},"rB/p":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"textarea[data-v-57509004]{font-family:consolas,monospace;width:100%;height:300px;padding:8px}.option[data-v-57509004]{line-height:2}.option input[data-v-57509004]{margin-left:8px}.output[data-v-57509004]{background:#e8f8dc}.error[data-v-57509004],.output[data-v-57509004]{font-family:consolas,monospace;overflow:auto;padding:8px;margin:8px 0}.error[data-v-57509004]{background:#ffe8e8;color:red}button[data-v-57509004]{margin:8px}a[data-v-57509004]{text-decoration:none}.clear-btn[data-v-57509004]{float:right}",""])}});