webpackJsonp([1],{"2NXm":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("4JBK"),r=a("HOEU"),o=!1;var c=function(e){o||a("8/mF")},i=a("VU/8")(n.a,r.a,!1,c,"data-v-57509004",null);i.options.__file="src/pages/index.vue",t.default=i.exports},"4JBK":function(e,t,a){"use strict";var n=a("//Fk"),r=a.n(n),o=a("mvHQ"),c=a.n(o),i=a("fZjL"),l=a.n(i),s=a("osXY");t.a={data:function(){return{g:s.a,content:"",output:"",error:"",val_map:{},batch_tx_map:{},spendable:!1,delegatable:!0,delegate:""}},watch:{},methods:{select_file:function(e){var t=this,a=new FileReader;a.onload=function(e){t.content=e.target.result},a.readAsText(e.target.files[0])},replace:function(e,t){return this.objReplace(e,t,this.val_map)},objReplace:function(e,t,a){return e.replace(new RegExp(l()(t).join("|"),"g"),function(e){return a?a[t[e]]:t[e]})},tryBatchTransfer:function(){try{this.batchTransfer()}catch(e){this.error=e.stack}},batchTransfer:function(){var e=this,t=JSON.parse(this.content),a=t.transactions,n=t.contracts,o=tezbridge({method:"public_key_hash"}).then(function(t){e.val_map.ADMIN=t,e.g.admin=t});a.forEach(function(t,a){o=o.then(function(){return tezbridge({method:"operations",operations:t.items.map(function(t){return{method:"transfer",amount:t.amount||0,fee:t.fee||0,gas_limit:t.gas_limit||"400000",destination:e.objReplace(t.destination,n),parameters:JSON.parse(e.objReplace(c()(t.parameters),n))}})}).then(function(n){return e.batch_tx_map["tx("+(t.name||a)+")"]=n.operation_id,e.output=c()(e.batch_tx_map,null,4),new r.a(function(e,t){var a=0,r=setInterval(function(){tezbridge({method:"head_custom",path:"/operation_hashes"}).then(function(t){(t.toString().indexOf(n.operation_id)>-1||a++>4)&&(clearInterval(r),e())}).catch(function(e){clearInterval(r),t(e)})},15e3)})})})}),o.then(function(){e.output="DONE!\n"+c()(e.batch_tx_map,null,4)}).catch(function(t){e.error=t instanceof Error?t.stack:t})},tryDeploy:function(e){try{this.deploy(e)}catch(e){this.error=e.stack}},deploy:function(e){var t=this;if(!e&&!confirm("Have you checked before?"))return!1;this.val_map={};var a=JSON.parse(this.content),n=a.order,o=a.replacement,i=a.contracts,l=tezbridge({method:"public_key_hash"}).then(function(e){t.val_map.ADMIN=e,t.g.admin=e});n.forEach(function(a){l=l.then(function(){var n=c()(i[a].script),l=c()(i[a].storage),s=JSON.parse(t.replace(n,o)),p=JSON.parse(t.replace(l,o));return tezbridge({method:"originate",no_injection:e,balance:0,script:{code:s,storage:p},spendable:t.spendable,delegatable:t.delegatable,delegate:t.delegate?t.delegate:void 0}).then(function(e){return t.val_map["CONTRACT."+a]=[].concat.apply([],e.contracts)[0],t.output=c()(t.val_map,null,4),new r.a(function(t,a){var n=0,r=setInterval(function(){tezbridge({method:"head_custom",path:"/operation_hashes"}).then(function(a){(a.toString().indexOf(e.operation_id)>-1||n++>4)&&(clearInterval(r),t())}).catch(function(e){clearInterval(r),a(e)})},15e3)})})})}),l.then(function(){t.output="DONE!\n"+c()(t.val_map,null,4),t.batch_tx_map={},e||(t.g.deployed_contracts=JSON.parse(t.output))}).catch(function(e){t.error=e instanceof Error?e.stack:e})}}}},"8/mF":function(e,t,a){var n=a("rB/p");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("49fd2249",n,!1,{sourceMap:!1})},HOEU:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],attrs:{placeholder:"input deployment or transaction JSON here"},domProps:{value:e.content},on:{input:function(t){t.target.composing||(e.content=t.target.value)}}}),a("div",{staticClass:"splitter"},[e._v("OR")]),a("input",{attrs:{type:"file"},on:{change:e.select_file}}),a("div",{staticClass:"option"},[a("label",[a("span",[e._v("spendable:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.spendable,expression:"spendable"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.spendable)?e._i(e.spendable,null)>-1:e.spendable},on:{change:function(t){var a=e.spendable,n=t.target,r=!!n.checked;if(Array.isArray(a)){var o=e._i(a,null);n.checked?o<0&&(e.spendable=a.concat([null])):o>-1&&(e.spendable=a.slice(0,o).concat(a.slice(o+1)))}else e.spendable=r}}})]),a("br"),a("label",[a("span",[e._v("delegatable:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.delegatable,expression:"delegatable"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.delegatable)?e._i(e.delegatable,null)>-1:e.delegatable},on:{change:function(t){var a=e.delegatable,n=t.target,r=!!n.checked;if(Array.isArray(a)){var o=e._i(a,null);n.checked?o<0&&(e.delegatable=a.concat([null])):o>-1&&(e.delegatable=a.slice(0,o).concat(a.slice(o+1)))}else e.delegatable=r}}})]),a("br"),a("label",[a("span",[e._v("delegate:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.delegate,expression:"delegate"}],domProps:{value:e.delegate},on:{input:function(t){t.target.composing||(e.delegate=t.target.value)}}})]),a("br")]),a("button",{on:{click:function(t){e.tryDeploy(!0)}}},[e._v("Check")]),a("button",{on:{click:function(t){e.tryDeploy(!1)}}},[e._v("Deploy")]),a("button",{on:{click:e.tryBatchTransfer}},[e._v("BatchTransfer")]),a("button",{staticClass:"clear-btn",on:{click:function(t){e.output="",e.error=""}}},[e._v("Clear")]),a("pre",{staticClass:"output"},[e._v(e._s(e.output))]),a("pre",{staticClass:"error"},[e._v(e._s(e.error))])])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},osXY:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n={admin:"",deployed_contracts:{}}},"rB/p":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"textarea[data-v-57509004]{font-family:consolas,monospace;width:100%;height:300px;padding:8px}.option[data-v-57509004]{line-height:2}.option input[data-v-57509004]{margin-left:8px}.output[data-v-57509004]{background:#e8f8dc}.error[data-v-57509004],.output[data-v-57509004]{font-family:consolas,monospace;overflow:auto;padding:8px;margin:8px 0}.error[data-v-57509004]{background:#ffe8e8;color:red}button[data-v-57509004]{margin:8px}a[data-v-57509004]{text-decoration:none}.clear-btn[data-v-57509004]{float:right}",""])}});